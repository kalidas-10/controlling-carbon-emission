# controlling-carbon-emission
ADAPT-VQE is a greedy iterative method for constructing an efficient and compact ansatz for estimating molecular wavefunctions27. In the first implementation of ADAPT-VQE27, the same operator with the largest slope was added at each iteration. The structure of this ansatz is based on the gradient method, which approximates the concept of recovering most of the energy involved. In fact, numerical studies of ADAPT-VQE and stochastically constructed simulations show that the latter converges rather poorly in terms of the number of parameters in quantum circuits. However, calculating the derivative of the entire operator pool to add a single operator will provide significant benefits in the context of numerical evaluation.
Due to the slow coupling of ADAPT-VQE for interaction with systems and the size of the operator pool, implementation of ADAPT-VQE for interaction molecules is hindered.

To reduce the number of gradient calculations, we present batch ADAPT-VQE, which adds several operators with maximum gradients simultaneously (see figure 1). This approach reduces the number of gradient calculations while creating a compact ansatz.

a
Figure 1: Schematic of the ansatz development process in raw and batch ADAPT-VQE.
Figure 1
The original ADAPT-VQE adds an operator with the largest gradient value at each iteration. In our batch ADAPT-VQE implementation, we add several operators with maximum gradients at each step of ansatz development; k is the number of gradients less than r times the maximum gradient.

Large image
We use Batch ADAPT-VQE with fermion pool and qubit pool. The quantum circuits in the Fermion ADAPT-VQE algorithm are derived from a pre-existing pool of excited operators.
We note here that we are defining the fermion operator in the UCCSD model, not the transition operator originally used (see Methods, section called Fermion pool). When the pool size is scaled to O(N2n2)
, the fermion ADAPT-VQE shows a polynomial overhead in the number of measurements compared to VQE for fixed circuits. Therefore, adding more gradients to the pool has advantages in both numerical simulations and experiments on quantum computers. In addition to the
Fermion ADAPT-VQE, we are investigating the performance of the qubit ADAPT-VQE. Tang et al.
28 proposed the ADAPT-VQE qubit method, which creates a qubit pool from a Pauli sequence. In contrast to the qubit-coupled set method35,36 these Pauli sequences are obtained by dividing each fermion operator into subterms and subtracting the entire Z-Paulis. This qubit pool method increases the size of the pool compared to the fermion method. However, it turns out that the qubit pool has an arbitrary number of operators and can be reduced to a pool. In this study, we examine the qubit pool of polynomial and linear dimensions.
Our numerical studies show that although reducing the qubit pool size aims to reduce the evaluation burden, polynomial pooling requires less evaluation in practice due to the slowness of ADAPT-VQE with linear pooling. Our results show that polynomial qubit pooling using batch ADAPT-VQE is a better strategy than using qubit ADAPT-VQE using linear pooling.

Liu et al. 30 added stable operators to improve the slow rotation of fermion ADAPT-VQE caused by adding an incorrect operator caused by Valdemoro's 3-RDM structure. Large batches in your application should be handled with care, as improper sizing can result in increased circuit depth.
In our method, we improve the original ADAPT-VQE method by adding a number of different variables at each step of the algorithm. Notice that we add operators to ansatz in the order in which they calculate gradients. Batch size changes allow adding additional workers early in the ansatz development process when power differences are significant, and alternatively reducing batch size as the ansatz approaches the desired state (see Supplementary Information, Supplementary Figure 1). The numerical results show that this application makes it possible to create simulations close to the original simulations while reducing the computational cost.
In each ADAPT-VQE iteration, we select all gradients that differ by less than r from the maximum gradient in which r is included as a hyperparameter (see Supplementary Information, Supplementary Figure 2). We set r = 2 for all molecules considered, and our numerical results show that batch ADAPT-VQE produces circuits close to those obtained from raw ADAPT-VQE. From a practical point of view, it is important that the hyperparameter values ​​can be the same for different molecules.

As ADAPT-VQE adds more operators at each step to batch processing, the number of iterations required to create ansatz is greatly reduced, greatly reducing the cost of workers in the pool.
This is important for classical simulations because calculating the CO2 molecule (19 qubits) takes a lot of time. We note that when it comes to experiments on existing quantum devices, a limitation on the operator's batch size at each iteration may be beneficial due to controlling the quantum circuit size. The performance of ADAPT-VQE in noise should also be examined.
